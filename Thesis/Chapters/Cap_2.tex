\chapter{Introduzione}\label{cap:Introduzione}

\section{Analisi preventiva del problema}\label{sez:Analisi preventiva}
\raggedright
L'obiettivo del progetto è quello di creare una demo di un sito internet (reso accessibile al pubblico una volta completato) che permetta di esercitarsi sui quiz "DD 131 del 31 maggio 2022" della patente nautica entro e oltre le 12 miglia, per imbarcazioni sia a vela che a motore.\\
L'analisi preventiva del problema, si è costituita delle seguenti parti: Il reperimento dei documenti riguardanti il nuovo decreto e le prove conformi allo stesso; la selezione di un "single-board" pc dove sviluppare il progetto; la comprensione di come poter programmare efficacemente il dispositivo scelto in relazione al carico di lavoro; la pianificazione della progettazione di un "database" efficiente per la gestione delle domande della prova.\\

\subsection{Reperimento dei documenti riguardanti il nuovo decreto e le prove conformi}
\raggedright
Il reperimento dei documenti riguardante il nuovo decreto è stato fatto avvalendosi del sito della Capitaneria di Pesaro e del sito del Ministero delle Infrastrutture e dei Trasporti. Dal primo si pensava di scaricare i documenti sulle regole d'esame (come il numero delle prove, il tempo limite per ogni prova e il tipo e il numero di domande); dal secondo, invece,  di scaricare l'intero documento relativo ai quiz d'esame, ma in entrambi i siti non vi erano i documenti cercati. %Ho deciso di visionare il sito della Capitaneria di Pesaro perché in passato ogni "compartimento marino" aveva la facoltà di modificare leggermente le regole d'esame, come per esempio le domande presentate al candidato e il tempo della prova; ora invece  il nuovo regolamento stabilisce che le domande devono essere le stesse in tutto il territorio nazionale senza possibilità di modifica (ma non è stato specificato se ancora i "dipartimenti marini" abbiano la facoltà di personalizzare alcune parti dell'esame).\\
Quindi una delle prime difficoltà riscontrata, è stata la totale assenza di documentazione da parte degli enti preposti alla diffusione, infatti  il sito del Ministero delle Infrastrutture e dei Trasporti non presentava al proprio interno alcun collegamento per poter scaricare il documento "pdf" contenente le domande del nuovo esame (al tempo della scrittura di questo documento, il problema descritto è stato risolto). Navigando sul sito nella sezione "Nautica" venivano solo presentati alcuni articoli (molto brevi e non tecnici)  sull'applicazione del nuovo regolamento per l'esame. Invece si è trovato il "pdf" contenente le domande cercate indicizzato su "Google". L'indirizzo  tramite il quale è stato possibile scaricare il documento faceva parte sempre del sito del Ministero delle Infrastrutture e dei Trasporti, ma nell'indirizzo erano presenti collegamenti ai quali non era possibile accedere internamente al sito. Modificando manualmente l'indirizzo  si poteva al massimo riaccedere alla pagina relativa agli articoli sull'esame, siccome tutte le altre pagine non venivano caricate.\\
Anche nel sito della Capitaneria di Pesaro non erano presenti le informazioni per l'esame in quanto nella sezione "Patenti" vi era solo scritto che l'esame per il conseguimento della patente nautica era cambiato con un nuovo regolamento, ma non vi era traccia delle informazioni tecniche riguardanti il nuovo esame.\\
È stato quindi ampliato lo spettro d'indagine, ricercando queste informazioni nei siti delle altre capitanerie (in particolare quelle di Cesenatico e di Genova) e nei siti delle scuole nautiche nazionali.\\
Nel sito della Capitaneria di Cesenatico si è trovata l'informazione che il nuovo esame era unico per tutta Italia e questo ha permesso di accettare anche le informazioni trovate al di fuori del mio Compartimento.\\
Confrontando i vari documenti trovati nei siti delle Capitanerie ci si è accorti che molti di essi erano in contraddizione su alcuni temi come ad esempio il numero di domande per prova. Così le informazioni sono state riordinate confrontandosi con persone esperte di nautica e in base a ciò che era più verosimile rispetto alla storia dell'esame. Quindi si è prodotto un documento (reperibile nel "Repository" del progetto) che avrebbe dovuto descrivere con un alto grado di correttezza l'attuale regolamento per il nuovo esame della patente nautica.\\
Una volta raccolta, analizzata e riordinata la documentazione, si sono preparate le domande dell'esame in un modo da facilitare l'inserimento delle stesse all'interno del database. Dividendo il pdf con tutte le domande dell'esame in tanti pdf più piccoli in base al capitolo, ci si è accorti che il documento rilasciato dal Ministero delle Infrastrutture e dei Trasporti era "bruciato" ovvero le domande erano state scritte producendo una tabella "Excel" all'interno di un file "Word". Nel documento pdf creato, non era possibile selezionare il testo, in quanto sembrava che la tabella "Excel" all'interno del foglio "Word" era stata trattata come un'immagine.\\
Qualche risultato in più è stato ottenuto usando la "suite" di "Adobe Acrobat", che permetteva di selezionare il testo, ma temo che questa cosa sia stata possibile con l'ausilio di un 'OCR' integrato, infatti non tutto il testo selezionato era corretto, alcune volte accadeva che le parole selezionate erano errate, ed altre volte invece nel testo apparivano caratteri strani 'invisibili' che rompevano la visualizzazione in "utf-8". 

\subsection{Selezione di un "single-board" pc}
\raggedright
Al momento della pianificazione del lavoro, sono state considerate tante possibilità di scelta riguardo alla piattaforma hardware sulla quale poter sviluppare il progetto. L'obiettivo era quello di cercare il compromesso tra il consumo energetico e la potenza di calcolo messa a disposizione dal supporto. Per questo motivo le piattaforme basate su processori "X86"sono state scartate a priori in quanto, anche se offrono prestazioni superiori rispetto alle architetture "R-ISC", sono energeticamente molto inefficienti. Bisogna tenere presente che un processore caratterizzato da una non buona gestione energetica tende a scaldare molto portando ad un consumo ulteriore di energia per il raffreddamento dello stesso.  Inoltre durante la fase di scelta della piattaforma software da usare per lo sviluppo di applicazioni web, si è notato che questo genere di piattaforme esibisce prestazioni migliori se installate su sistemi "multi-core" (anche se quest'ultimi sono meno potenti nella potenza di calcolo messa a disposizione) in quanto garantiscono un maggiore parallelismo sui calcoli e nel caso specifico di un "web-server", il fatto che siano generalmente "meno potenti" non impatta considerevolmente le prestazioni dato che i calcoli che si devono svolgere in questo caso non sono complessi. Quindi ai fini del progetto, le architetture "R-ISC" sono preferibili alle più classiche "X86" non solo per la migliore efficienza energetica e di conseguenza anche per le temperature più contenute, ma anche perché i sistemi "multi-core" sono più economici se fatti con architetture "R-ISC".\\
Fatte queste considerazioni, i principali marchi esaminati per il progetto sono stati: "Pine 64", "Raspberry Pi", "Banana Pi", "Orange Pi" "ODROID". In generale i marchi sui quali si sono concentrate maggiormente le ricerche sono stati: "Pine 64" e "Raspberry Pi", dato che i marchi restanti erano prevalentemente cloni "cinesi" (con lievi personalizzazioni) delle schede progettate dai primi.\\
Per ragioni di presunta compatibilità e di "community" alla fine si è optato per le schede "Raspebrry Pi" anche se i prodotti offerti da "Pine 64" offrivano sulla carta prestazioni migliori. È bene mettere in evidenzia come ad oggi i processori "RockChip" siano ancora in uno stato tutto sommato embrionale rispetto ai processori "armv7"  a causa soprattutto del "kernel non main-line" necessario per il corretto funzionamento dei processori "RockChip". Infatti il "kernel linux" tutt'ora non incorpora i "moduli-kernel" che sono stati scritti per "RockChip", con la conseguenza che i sistemi operativi disponibili per questo genere di schede sono loro specifici, rompendo virtualmente la compatibilità con il software "ARM" presente su "linux".\\
Concludendo come base "hardware" per lo sviluppo del progetto è stata scelta la scheda "Raspberry pi 3b+". Per ragioni economiche non è stato possibile acquistare nel momento del progetto una scheda della linea "Raspberry pi 4" per i prezzi poco accessibili a causa della "crisi dei semiconduttori".

\subsection{Pianificazione della programmazione del dispositivo}
\raggedright
A questo punto del progetto è stata fatta la ricerca per stabilire quale tipo di software fosse più idoneo per essere installato sulla scheda da me scelta. Dal punto di vista del sistema operativo si è ritenuto opportuno confrontare le prestazioni di due possibili alternative, ovvero installare il sistema operativo di base per "Raspberry Pi" ("Raspbian") con il suo "desktop-enviroment (pixel)", con la premessa che "pixel" non è il "desktop-enviroment" più "leggero" per "Raspberry Pi", oppure d'installare il sistema operativo di base senza un "desktop-eviroment" pre-configurato, in modo da poter successivamente installarci un "desktop-enviroment" basato su "XFCE" che è molto più "leggero" rispetto a "pixel", dato che quest'ultimo è basato su "LXDE".\\
Dal punto di vista dell'installazione della piattaforma "software" per lo sviluppo di applicazioni web, è stata scelta quasi subito l'installazione di "LAMP". Questa scelta è stata supportata dal fatto che in passato il "Raspberry Pi" è stato ampiamente usato dagli utenti come "web-server" (ancora più comune è il suo utilizzo come "server" casalingo), con la conseguenza che su internet (in particolare nel caso della piattaforma scelta) è presente una vasta quantità d'informazioni sull'argomento,  anche se questo è chiaramente un utilizzo improprio, dato che la presenza sulle schede della porta "gpio" fa intendere che quest'ultime siano state progettate per un altro utilizzo. 

\subsection{Progettazione del "database"}
\raggedright
Durante l'analisi della documentazione, si è osservato che nel caso del "database" non vi era una grande possibilità di raffinare i dati.\\
Le uniche accortezze che sono state rilevate come importanti durante la costruzione del database sono state:
\begin{itemize}
	\item l'archiviazione delle domande e delle risposte all'interno della stessa tabella ("così come poste") facendo attenzione a eliminare i dati ridondanti o deducibili. Un esempio di ridondanza che ho risolto è stata nella tabella dei quiz della vela che presentava due colonne di correzione, dove nella prima si rispondeva se la domanda posta fosse vera, mentre nella seconda se la domanda fosse falsa. Siccome i quiz della vela sono dei quiz dove la risposta può essere vera o falsa, si è deciso di salvare solo la prima colonna (ovvero quella che dice se la domanda è vera), in quanto la seconda colonna è una conseguenza della prima. 
	
	\item La gestione e le proprietà delle domande sono avvenute in maniera separata. Quest'ultima caratteristica fa quindi in modo che ogni prova sia definita da due tabelle, dove nella prima vi sono soltanto le domande e le risposte, mentre nella seconda vi sono le informazioni riguardo a come presentare le domande. Avendo separato la parte informativa dalla sua "rappresentazione" ne consegue che il sito internet, che dovrà accedere alle informazioni contenute nel database, non sarà un sito specifico per quelle precise domande, bensì un sito specifico per le prove, quindi in caso di cambiamento delle domande o delle loro proprietà, non si dovrà intervenire a livello di codice ma solo a livello di "database". Inoltre in questo modo mettendo in relazione le tabelle si può più facilmente fare controlli, in quanto tutte le informazioni tra loro connesse sono situate nello stesso posto.
\end{itemize}

Per delle funzionalità che sono state stabilite come obbligatorie al momento della assegnazione del progetto, l'applicazione web deve inoltre essere in grado di gestire gli utenti, ovvero questi si devono poter registrare anche con la verifica della mail e il servizio deve essere accessibile solo a quegli utenti che si sono registrati. Per questo motivo si è pensato di inserire nel database una semplice tabella dove inserirei dati dell'utente e dove memorizzare lo stato di verifica dell'account. Quest'ultima cosa è stata trattata con un numero ”booleano” che per scelta predefinita nel momento dell'inserimento è sempre a ”false”, quindi vuol dire che la ”riga” deve essere aggiornata in un secondo momento per fare in modo che l’utente sia verificato.