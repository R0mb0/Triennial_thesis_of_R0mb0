\chapter{Introduzione}\label{cap:Introduzione}

\section{Analisi preventiva del problema}\label{sez:Analisi preventiva}

L'obiettivo del progetto è quello di creare una demo di un sito internet (da pubblicare una volta completato) che permetta di potersi esercitare sui quiz "DD 131 del 31 maggio 2022" della patente nautica entro e oltre le 12 miglia, per imbarcazioni sia a vela che a motore.\\
L'analisi preventiva del problema, per tanto, si è composta delle seguenti azioni: Il reperimento dei documenti riguardanti il nuovo decreto e le prove conformi allo stesso; la selezione di un "single-board" pc nel quale fare le prove; la comprensione di come poter programmare efficacemente il dispositivo scelto in relazione al tipo di operazioni che deve svolgere; la pianificazione della progettazione di un "database" efficiente per la gestione delle domande della prova.\\

\subsection{Reperimento dei documenti riguardanti il nuovo decreto e le prove conformi}
Il reperimento dei documenti riguardante il nuovo decreto è stato fatto avvalendosi del sito della Capitaneria di Pesaro e del sito del Ministero delle Infrastrutture e dei Trasporti. Dal primo si pensava di scaricare i documenti sulle regole d'esame (come il numero delle prove, il tempo limite per ogni prova e il tipo e il numero di domande); dal secondo, invece,  di scaricare l'intero documento relativo ai quiz d'esame, ma in entrambi i siti non vi erano i documenti cercati . Ho deciso di visionare il sito della Capitaneria di Pesaro perché in passato ogni "compartimento marino" aveva la facoltà di modificare leggermente le regole d'esame, come per esempio le domande presentate al candidato e il tempo della prova; ora invece  il nuovo regolamento stabilisce che le domande devono essere le stesse in tutto il territorio nazionale senza possibilità di modifica (ma non è stato specificato se ancora i "dipartimenti marini" abbiano la facoltà di personalizzare alcune parti dell'esame).\\
Quindi una delle prime difficoltà riscontrata, è stata la totale assenza di documentazione da parte degli enti preposti alla diffusione, infatti  il sito del Ministero delle Infrastrutture e dei Trasporti non presentava al proprio interno alcun collegamento per poter scaricare il documento "pdf" contenente le domande del nuovo esame (al tempo della scrittura di questo documento, il problema descritto è stato risolto). Navigando sul sito nella sezione "Nautica" venivano solo presentati alcuni articoli (molto brevi e non tecnici)  sull'applicazione del nuovo regolamento per l'esame. Invece ho trovato il "pdf" contente le domande che cercavo indicizzato su "Google". L'indirizzo  tramite il quale è stato possibile scaricare il documento faceva parte sempre del sito del Ministero delle Infrastrutture e dei Trasporti, ma nell'indirizzo erano presenti collegamenti ai quali non era possibile accedere internamente al sito. Modificando manualmente l'indirizzo  si poteva al massimo riaccedere alla pagina relativa agli articoli sull'esame, siccome tutte le altre pagine non venivano caricate.\\
nche nel sito della Capitaneria di Pesaro non erano presenti le informazioni per l'esame in quanto nella sezione "Patenti" vi era solo scritto che l'esame per il conseguimento della patente nautica era cambiato con un nuovo regolamento, ma non vi era traccia delle informazioni tecniche riguardanti il nuovo esame.\\
È stato quindi ampliato lo spettro d'indagine, ricercando queste informazioni nei siti delle altre capitanerie (in particolare quelle di Cesenatico e di Genova) e nei siti delle scuole nautiche nazionali.\\
Nel sito della Capitaneria di Cesenatico ho trovato l'informazione che il nuovo esame era unico per tutta Italia e questo mi ha permesso di poter accettare anche le informazioni trovate al di fuori del mio Compartimento.\\
Confrontando i vari documenti trovati nei siti delle Capitanerie mi sono accorto che molti di essi erano in contraddizione su alcuni temi come ad esempio il numero di domande per prova. Le informazioni sono state riordinate confrontandomi con persone esperte di nautica e in base a ciò che era più verosimile rispetto alla storia dell'esame. Ho prodotto un documento (reperibile nel "Repository" del progetto) che dovrebbe descrivere con un alto grado di correttezza l'attuale regolamento per il nuovo esame della patente nautica.\\
Una volta raccolto, analizzato e riordinato la documentazione, ho preparato le domande dell'esame in un modo da facilitare l'inserimento delle stesse all'interno del database. Dividendo il pdf con tutte le domande dell'esame in tanti pdf più piccoli in base al capitolo, mi sono accorto che il documento rilasciato dal Ministero delle Infrastrutture e dei Trasporti era "bruciato" ovvero, le domande erano state scritte producendo una tabella "Excel" all'interno di un file "Word". Nel documento pdf creato, non era possibile selezionare il testo, in quanto sembra che la tabella "Excel" all'interno del foglio "Word" era stata trattata come un'immagine.\\
Qualche risultato in più è stato ottenuto usando la "suite" di "Adobe Acrobat", che permetteva di selezionare il testo, ma temo che questa cosa è stata possibile con l'ausilio di un 'OCR' integrato, infatti non tutto il testo selezionato era corretto, alcune volte accadeva che le parole selezionate erano errate, ed altre volte invece nel testo apparivano caratteri strani 'invisibili' che rompono la visualizzazione in "utf-8". 

\subsection{Selezione di un "single-board" pc}
Al momento della pianificazione del lavoro, sono state considerate tante possibilità di scelta riguardo alla piattaforma hardware sulla quale poter sviluppare il progetto. L'obiettivo era quello di cercare il compromesso tra il consumo energetico e la potenza di calcolo messa a disposizione dal supporto. Per questo motivo le piattaforme basate su processori "X86"sono state scartate a priori, in quanto, anche se offrono prestazioni superiori rispetto alle architetture "R-ISC", sono energeticamente molto inefficienti. Bisogna tenere presente che un processore caratterizzato da una non buona gestione energetica, tende a scaldare molto, facendosi che si consumi ulteriore energia per il raffreddamento dello stesso.  Inoltre, durante la fase di scelta di quale piattaforma software usare per lo sviluppo di applicazioni web, si è notato che questo genere di piattaforme esibisce prestazioni migliori se installate su sistemi "multi-core", anche se quest'ultimi sono meno potenti nella potenza di calcolo messa a disposizione, in quanto questo genere di sistemi garantisce a prescindere un maggiore parallelismo sui calcoli e nel caso specifico di un "web-server", il fatto che questo genere di processori siano generalmente "meno potenti" non impatta considerevolmente le prestazioni, siccome i calcoli che si devono svolgere non sono complessi. Tenendo presente quest'ultimo concetto è chiaro come, ai fini del progetto, le architetture "R-ISC" siano preferibili alle più classiche "X86", non solo per la migliore efficienza energetica e di conseguenza anche per le temperature più contenute, ma anche perché i sistemi "multi-core" sono più economici se fatti con architetture "R-ISC", ribadendo che in questo caso specifico è più conveniente disporre di una potenza di calcolo inferiore a favore di più "core".\\
Fatte queste considerazioni, sono stati tanti i candidati compatibili per il progetto (le quali schede si basano tutte sulla architettura "ARM"), si mettono in evidenzia i principali marchi che sono stati esaminati: "Pine 64", "Raspberry Pi", "Banana Pi", "Orange Pi" "ODROID". In generale i marchi sui quali si sono concentrate maggiormente le ricerche sono stati: "Pine 64" e "Raspberry Pi", siccome i marchi restanti erano prevalentemente cloni "cinesi" (con lievi personalizzazioni) delle schede progettate dai primi.\\
Per ragioni di presunta compatibilità e di "community" alla fine si è optato per le schede "Raspebrry Pi" anche se i prodotti offerti da "Pine 64" offrivano sulla carta prestazioni migliori. Si mette in evidenzia come ad oggi i processori "RockChip" siano ancora in uno stato tutto sommato embrionale rispetto ai processori "armv7" in primo luogo a causa del "kernel non main-line" necessario per il coretto funzionamento dei processori "RockChip". Infatti il "kernel linux" tutt'ora non incorpora i "moduli-kernel" che sono stati scritti per "RockChip", con la conseguenza che i sistemi operativi disponibili per questo genere di schede sono loro specifici, rompendo virtualmente la compatibilità con il software "ARM" presente su "linux".\\
In definitiva, come base "hardware" per lo sviluppo del progetto è stata scelta la scheda "Raspberry pi 3b+". Per ragioni economiche non è stato possibile acquistare una scheda della linea "Raspberry pi 4" siccome al tempo del progetto a causa della "crisi dei semiconduttori" e di varie speculazioni, i prezzi erano poco accessibili.

\subsection{Pianificazione della programmazione del dispositivo}
A questo punto del progetto è stata fatta della ricerca per stabilire quale tipo di software fosse più idoneo per essere installato sulla scheda da me scelta. Dal punto di vista del sistema operativo si è ritenuto opportuno confrontare sulle prestazioni due possibili alternative, ovvero, installare il sistema operativo di base per "Raspberry Pi" ("Raspbian") con il suo "desktop-enviroment (pixel)", con la premessa che "pixel" non è il "desktop-enviroment" più "leggero" per "Raspberry Pi", oppure d'installare il sistema operativo di base senza un "desktop-eviroment" pre-configurato, in modo da poter successivamente installarci un "desktop-enviroment" basato su "XFCE" che è molto più "leggero" rispetto a "pixel", siccome quest'ultimo è basato su "LXDE".\\
Dal punto di vista dell'installazione della piattaforma "software" per lo sviluppo di applicazioni web, è stata scelta quasi subito l'installazione di "LAMP". Questa scelta è stata supportata dal fatto che in passato il "Raspberry Pi" è stato ampiamente usato dagli utenti come "web-server" (ancora più comune è il suo utilizzo come "server" casalingo), con la conseguenza che su internet (in particolare nel caso della piattaforma scelta) è presente una vasta quantità d'informazioni sull'argomento,  anche se questo è chiaramente un utilizzo improprio, dato che la presenza sulle schede della porta "gpio" fa intendere che quest'ultime siano state progettate con in mente un altro utilizzo. 

\subsection{Progettazione del "database"}
Durante l'analisi della documentazione, si è ben osservato che nel caso del "database" non vi era una grande possibilità di manovrare i dati.\\
Le uniche accortezze che sono state rilevate come importanti durante la costruzione del database sono state: l'archiviazione delle domande e delle risposte all'interno della stessa tabella ("così come poste") facendo attenzione a eliminare i dati ridondanti o deducibili. Un esempio di ridondanza che ho risolto è stato nella tabella dei quiz della vela, la quale presentava due colonne di correzione, dove nella prima si rispondeva al fatto se la domanda posta fosse vera, mentre nella seconda, se la domanda fosse falsa. Siccome i quiz della vela sono dei quiz dove la risposta può essere vera o falsa, ho deciso di salvare solo la prima colonna (ovvero quella che dice se la domanda è vera), in quanto la seconda colonna è una conseguenza della prima; la gestione separata delle domande e delle "proprietà delle domande" che in questo caso specifico è meglio definire come le proprietà della prova, per esempio, data la suddivisione in capitoli delle domande entro le 12 miglia (non di carteggio), è stata creata una tabella nella quale contenere per ogni capitolo le domande da presentare al candidato per la prova.\\
Quest'ultima caratteristica fa quindi in modo che ogni prova sia definita da due tabelle, dove nella prima vi sono soltanto le domande e le risposte, mentre nella seconda ci sono le informazioni riguardo a come presentare le domande. A questo punto si desidera far notare come la sottoscritta gestione sia particolarmente conveniente. Avendo separato la parte informativa dalla sua "rappresentazione", ne consegue che il sito internet che dovrà accedere alla informazioni contenute nel database, non sarà un sito specifico per quelle precise domande, ma bensì, un sito sì specifico per le prove, ma non specifico a livello di domande, facendo in modo che in caso di cambiamento delle domande o delle loro proprietà, non si dovrà intervenire a livello di codice, ma solo a livello di "database", inoltre in questo modo (mettendo in relazione le tabelle) si può più facilmente fare controlli, in quanto tutte le informazioni tra loro connesse sono situate nello stesso posto.\\
Per delle funzionalità che sono state stabilite come obbligatorie al momento della assegnazione del progetto, l'applicazione web deve inoltre essere in grado di gestire gli utenti, ovvero, gli utenti si devono poter registrare con anche la verifica della mail e il servizio deve essere accessibile a solo quegli utenti che si sono registrati. Per questo motivo si è pensato a questa fase di inserire nel database una semplice tabella dove inserire i dati dell'utente e dove memorizzare lo stato di verifica dell'account. Quest'ultima cosa è stata trattata con un numero ”booleano” che per scelta predefinita nel momento dell'inserimento è sempre a ”false”, quindi vuol dire che la ”riga” deve essere aggiornata in un secondo momento per fare in modo che l’utente sia verificato.